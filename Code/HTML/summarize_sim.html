<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>summarize_sim. CTSim 0.1.4</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">CTSim 0.1.4</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Summarize a simulation</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>summarize_sim(sim, breaks, locs, t_window, species&nbsp;=&nbsp;NULL, land&nbsp;=&nbsp;NULL, gsad&nbsp;=&nbsp;NULL, agg_times&nbsp;=&nbsp;NULL, P_obs&nbsp;=&nbsp;list(1), sum_parms&nbsp;=&nbsp;NULL)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>sim</dt>
      <dd>(required) either a filename for a simulation run (as saved by
<code><a href='run_sim_N.html'>run_sim_N</a></code> or an array of simulation results (as returned by 
<code><a href='run_sim.html'>run_sim</a></code>. If an array, must specify <code>species</code>, 
<code>land</code> and <code>gsad</code>.</dd>
      <dt>breaks</dt>
      <dd>(required) a vector of numbers on <code>[0,1]</code> (in order) 
specifying boundaries of occupancy categories</dd>
      <dt>locs</dt>
      <dd>(required) either a two-column matrix of cell locations where 
species' abundances should be summed or a list of matrices designating
multiple spatial units where abundance should be summed (see 
<code><a href='calc_abun_profile.html'>calc_abun_profile</a></code>)</dd>
      <dt>t_window</dt>
      <dd>(required) either a list containing <code>start</code>
and <code>stop</code> specifying that all collected timepoints in that interval
should be considered or an explicit vector of timepoints</dd>
      <dt>species</dt>
      <dd>array of species vital rates used in the simualation
(as generated by <code><a href='make_species.html'>make_species</a></code>)</dd>
      <dt>land</dt>
      <dd>matrix or raster of habitat types defining
the landscape used in the simulation
(as generated by <code><a href='make_landscape.html'>make_landscape</a></code>)</dd>
      <dt>gsad</dt>
      <dd>vector defining the global relative abundance of each species
used in the simulation. Must be in the same order as <code>species</code>.</dd>
      <dt>agg_times</dt>
      <dd>either a single number specifing the number of timepoints 
that should be aggregated before calculating occupancy or a list of
vectors defining exactly which timepoints should be aggregated (see details).
 Defaults to no aggregation.</dd>
      <dt>P_obs</dt>
      <dd>vector of detection probabilities (see details and 
<code><a href='sample_sim.html'>sample_sim</a></code>)</dd>
      <dt>sum_parms</dt>
      <dd>list of parameters controlling how the simulation is 
    summarized across spatial and temporal units. May contain:
    <dl>
        <dt>agg_times</dt><dd>specifies how time points should be aggregated 
        before calculations. See <code><a href='calc_CT.html'>calc_rich_CT</a></code> for details.</dd>

    <dt>time_sum</dt><dd>character vector indicating which timepoint
        should be used in summary statistics (see details)</dd>

    <dt>quants</dt><dd>vector of quantiles for summarizing across spatial units
        (see details)</dd>

    <dt>hab</dt><dd>character string indicating whether summary should be performed
        across all habitat types (default) or for just one (indicated by 
        <code>'A'</code> or <code>'B'</code>.</dd>

</dl>
</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
a list of arrays defined as follows:
	<dl>
		<dt>bio</dt><dd>richness and abundance of biologically defined species,
			has dimensions: <code>[richness or abundance, spatial 
			summary statistic, core or transient, detection probability]</code></dd></p>
  
      <p><dt>occ</dt><dd>richness and abundance in temporal occupancy categories,
			has dimensions: <code>[richness or abundance, spatial 
			summary statistic, occupancy category, detection probability]</code></dd></p>
  
      <p><dt>xclass</dt><dd>core-transient cross-classification,
			has dimensions: <code>[spatial summary statistic,
			 cross-classification category, detection probability]</code></dd></p>
  
      <p><dt>abun</dt><dd>species' relative abundances, has dimensions:
			<code>[species, detection probability]</code></dd></p>
  
      <p></dl></p>
  
      <p>If <code>sum_parms$time_sum = 'none'</code> then each of these arrays will
	have an additional dimension corresponding to timepoints.
</dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p>Summarizes the output of a single simulation run.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>

      <p>The function calculates summary statistics of four main quantities and 
returns them in a named list:
<dl>
<dt>bio</dt><dd>richness and abundance of biologically core and transient 
	species (based on birth rates)</dd></p>
  
      <p><dt>occ</dt><dd>richness and abundance of species in classes based on
	their temporal occupancy</dd></p>
  
      <p><dt>xclass</dt><dd>number of species in each of four categories: biologically
	core - occupancy core, biologically core - occupancy transient,
	biologically transient - occupancy core, and biologically transient -
	occupancy transient (see<code><a href='cross_classify.html'>cross_classify</a></code>)</dd></p>
  
      <p><dt>abun</dt><dd>relative rank abundance of each species
	in the metacommunity</dd></p>
  
      <p></dl></p>
  
      <p>The function proceeds as follows:
<ol>
<li> Actual species' abundances are calculated for each spatial unit 
	in <code>locs</code> and temporal unit in <code>t_window</code>. See documentation
	of <code><a href='calc_abun_profile.html'>calc_abun_profile</a></code> for more information on 
	these parameters.
</li>
<li> Observed species' abundance profiles are calculated by sampling
	actual abundance profiles using the detection probabilities 
	provided in <code>P_obs</code>.
</li>
<li> Observed abundance profiles are used to calculate species 
	temporal occupancy in each of the spatial units, after aggregating 
	timepoints according to <code>agg_times</code> (see 
	<code><a href='calc_occupancy.html'>calc_occupancy</a></code>).
</li>
<li> Richness and abundance of species in each of the temporal occupancy
	categories defined by <code>breaks</code> are calculated in each spatial 
	unit for each timepoint. Timepoints may
	be aggregated prior to calculations using the <code>agg_times</code>
	argument in <code>sum_parms</code>. See (see <code><a href='calc_CT.html'>calc_rich_CT</a></code>) for 
	details.
</li>
<li> For each spatial unit, habitat values are averaged across the
	cells that comprise it (see <code><a href='average_habitat.html'>average_habitat</a></code> and this 
	average habitat type is used to determine which species are 
	biologically core and transient (based on whether they have positive
	birth rates in that habitat). Richness and abundance of biologically
	core and transient species is then calculated for each spatial unit
	at each timepoint. As in the previous step, timepoints may be 
	aggregated prior to calculations using the <code>agg_times</code> 
	argument in <code>sum_parms</code>.
</li>
<li> For each spatial unit, species are classified as core or transient 
	based on whether they fall in the first or last occupancy interval defined
	by <code>breaks</code>. Then, the number of species classified as biologically
	core - occupancy core, biologically core - occupancy transient,
	biologically transient - occupancy core, and biologically transient -
	occupancy transient are counted for each spatial unit.
</li>
<li> The element <code>time_sum</code> in <code>sum_parms</code> defines which 
	timepoints are used for summarizing richness and abundance. If 
	<code>time_sum = 'none'</code> then all timepoints are summarized 
	individually. Other options are <code>'mean'</code> for averaging across all
	timepoints in <code>t_window</code> or <code>'last'</code> for only using the
	last timepoint in <code>t_window</code>.
</li>
<li> Summary statistics are calculated across all spatial units.
	Minimally, this is the mean and variance, but may also include any
	quantiles specified in the <code>quants</code> argument of <code>sum_parms</code>.
</li>
<li> The relative abundance of each species is calculated across the entire
	metacommunity for each set of observed abundances (from step 2).
</li>
</ol></p>
  
      <p></p>
  
    </div>
      </div>
  <div class="span4">
    <!-- <ul>
      <li>summarize_sim</li>
    </ul>
    <ul>
      
    </ul> -->
      
        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>